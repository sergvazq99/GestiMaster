<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>游닀 Tus eventos</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <link rel="stylesheet" type="text/css" href="/css/styles.css">
  <link rel="icon" href="images/logo.webp" type="image/png">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" />
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>

<body>
  <header>
    <img src="images/logo.webp" title="Gestimaster" alt="gestimaster">
    <h1>Portal de Gesti칩n de Eventos Universitarios</h1>
    <nav class="navbar navbar-expand-lg ">
      <div class="d-flex justify-content-start w-50 text-white"> <a id="titulo" href="/" class="display-5 ms-3 mb-2 text-white"><em>Inicio</em></a><span></div>
      <%if(user.nombre){%>
      <form class="d-flex" id="searchForm"> <input class="form-control me-2" type="search" placeholder="Buscar eventos" aria-label="Search" id="searchInput" value="<%= typeof q !== 'undefined' ? q : '' %>"> <button class="btn btn-outline-success" type="submit">Buscar</button> </form>
      <%if(user.rol==="organizador"){%>
      <ul><a href="/create-event">Crear eventos</a></ul>
      <ul><a href="/ListAlumns">Lista de alumnos en eventos</a></ul>
      <%} else{%>

      <%}%>
            
              <div id="usuario" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="<%=user.correo %>">
      <%=user.nombre %>
      </div>
      <img class="imageUser ms-3" src="/user-image" alt="usuario">


      <div class="dropdown">
        <button id="btn-config" type="button" data-bs-toggle="dropdown" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <span class="tooltip-text">Configuraci칩n</span>
        </button>

        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="/profile"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
              </svg> Tu perfil</a>
          </li>
          <li><a class="dropdown-item" href="/messages"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
                <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6" />
              </svg> Notificaciones</a>
          </li>
          <li class="dropdown-submenu dropend">
            <a class="dropdown-item dropdown-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0" />
                <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z" />
              </svg> Configuraci칩n</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="/update"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                    <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z" />
                  </svg> Edita tu perfil</a>
              </li>
              <li class="dropdown-submenu dropend">
                <a class="dropdown-item dropdown-toggle" href="#"><button class="non-styled-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
                      <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z" />
                    </svg> Tema</button></a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#" onclick="resetContrast()">Predeterminado</a></li>
                  <li><a class="dropdown-item" href="#" onclick="lightTheme()">Claro</a></li>
                  <li><a class="dropdown-item" href="#" onclick="darkTheme()">Oscuro</a></li>
                </ul>
              </li>

              <li>
                <a class="dropdown-item" href="#" id="fontSizeDropdown" data-bs-toggle="tooltip" data-bs-placement="right" title="Aumentar tama침o de fuente">
                  <button class="non-styled-button" data-bs-toggle="modal" data-bs-target="#fontSizeModal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-font" viewBox="0 0 16 16">
                      <path d="M10.943 4H5.057L5 6h.5c.18-1.096.356-1.192 1.694-1.235l.293-.01v6.09c0 .47-.1.582-.898.655v.5H9.41v-.5c-.803-.073-.903-.184-.903-.654V4.755l.298.01c1.338.043 1.514.14 1.694 1.235h.5l-.057-2z" />
                      <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1" />
                    </svg> Tama침o de fuente
                  </button>

                </a>
              </li>

            </ul>
          </li>
          <hr>
          <%if(user.rol==="organizador"){%>
          <li><a class="dropdown-item" href="/events"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ol" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5" />
                <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635z" />
              </svg> Tus eventos</a></li>
          <%} else{%>
          <li><a class="dropdown-item" href="/inscriptions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ol" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5" />
                <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635z" />
              </svg> Tus inscripciones</a></li>
          <%}%>

                        <li> <a class="dropdown-item" href="#" data-bs-toggle="modal"
                            data-bs-target="#changePhotoModal">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                              class="bi bi-image" viewBox="0 0 16 16">
                              <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" />
                              <path
                                d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z" />
                            </svg> Cambiar foto
                          </a> </li>
                        <hr>
                        <li><a class="dropdown-item" href="/logout"><svg xmlns="http://www.w3.org/2000/svg" width="16"
                              height="16" fill="currentColor" class="bi bi-door-closed" viewBox="0 0 16 16">
                              <path
                                d="M3 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v13h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3zm1 13h8V2H4z" />
                              <path d="M9 9a1 1 0 1 0 2 0 1 1 0 0 0-2 0" />
                            </svg> Cerrar sesi칩n</a></li>
                </ul>
              </div>
              </div>

              <% } else{%>


          <%}%>

    </nav>
  </header>
  <div class="events-form">
    <%if(eventos.length===0){%>
          <h3>No has creado ning칰n evento todav칤a <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-frown-fill" viewBox="0 0 16 16">
              <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m-2.715 5.933a.5.5 0 0 1-.183-.683A4.5 4.5 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 0 1-.866.5A3.5 3.5 0 0 0 8 10.5a3.5 3.5 0 0 0-3.032 1.75.5.5 0 0 1-.683.183M10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8" />
            </svg>
          </h3>
          <%} else{%>
          <h3 class="events-title">Eventos creados</h3>
          <hr>
          <div class="container text-center">
            <div class="row row-cols-1 row-cols-md-4 g-4">
              <% eventos.forEach(evento=> { %>
              <div class="col">
                <div class="card text-bg-secondary mb-3 event-card" style="max-width: 20rem;" data-event-id="<%= evento.id %>">
                  <div class="card-header" id="titulo">
                    <h5 class="card-title" data-titulo="<%= evento.titulo %>">
                      <%= evento.titulo %>
                    </h5>
                  </div>
                  <div class="card-body">
                    <p class="card-text">
                      <%= evento.descripcion %>
                    </p>
                    <div class="collapse" id="collapse-<%= evento.id %>">
                      <div class="card card-body text-start">
                        <u>
                          <p><strong>Fecha:</strong>
                        </u>
                        <%= evento.fecha %>
                        </p>
                        <u>
                          <p><strong>Hora:</strong>
                        </u>
                        <%= evento.hora %>
                        </p>
                        <u>
                          <p><strong>Ubicaci칩n:</strong>
                        </u>
                        <%= evento.ubicacion %>
                        </p>
                        <u>
                          <p><strong>Capacidad:</strong>
                        </u>
                        <%= evento.capacidad_maxima %> personas</p>
                        <u>
                          <p><strong>Tipo:</strong>
                        </u>
                        <%=evento.tipo%>
                        </p>
                      </div>
                    </div>


                    <div class="delete-event">
                      <p>
                        <a class="btn btn-info" data-bs-toggle="collapse" href="#collapse-<%= evento.id %>" role="button" aria-expanded="false" aria-controls="collapse-<%= evento.id %>" title="mostrar detalles">

                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                            <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
                          </svg>
                        </a>
                      </p>
                      <form action="/delete/<%=evento.id%>" method="POST">
                        <button class="btn btn-info" title="eliminar evento" type="submit" onclick="validate(evento)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z" />
                            <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z" />
                          </svg></button>

                      </form>
                      <p><button class="btn btn-info" title="editar evento" data-bs-toggle="modal" data-bs-target="#editModal-<%= evento.id %>">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                            <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z" />
                          </svg>
                        </button></p>
                      <p><button class="btn btn-info" title="personalizar evento" data-bs-toggle="modal" data-bs-target="#customizeModal-<%= evento.id %>">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-brush" viewBox="0 0 16 16">
                          <path d="M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.1 6.1 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.1 8.1 0 0 1-3.078.132 4 4 0 0 1-.562-.135 1.4 1.4 0 0 1-.466-.247.7.7 0 0 1-.204-.288.62.62 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896q.19.012.348.048c.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04M4.705 11.912a1.2 1.2 0 0 0-.419-.1c-.246-.013-.573.05-.879.479-.197.275-.355.532-.5.777l-.105.177c-.106.181-.213.362-.32.528a3.4 3.4 0 0 1-.76.861c.69.112 1.736.111 2.657-.12.559-.139.843-.569.993-1.06a3 3 0 0 0 .126-.75zm1.44.026c.12-.04.277-.1.458-.183a5.1 5.1 0 0 0 1.535-1.1c1.9-1.996 4.412-5.57 6.052-8.631-2.59 1.927-5.566 4.66-7.302 6.792-.442.543-.795 1.243-1.042 1.826-.121.288-.214.54-.275.72v.001l.575.575zm-4.973 3.04.007-.005zm3.582-3.043.002.001h-.002z"/>
                        </svg>  
                      </button>
                       
                        </p>
                     <!-- Modal para personalizar el evento -->
<div class="modal fade" id="customizeModal-<%= evento.id %>" tabindex="-1" aria-labelledby="customizeModalLabel-<%= evento.id %>" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="customizeModalLabel-<%= evento.id %>">Personalizar Evento: <%= evento.titulo %></h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <form class="customize-event-form">
                  <div class="mb-3">
                      <label for="font-family-<%= evento.id %>" class="form-label">Fuente</label>
                      <select class="form-select" id="font-family-<%= evento.id %>" name="font-family" onchange="applyCustomization('<%= evento.id %>')">
                          <option value="Arial">Arial</option>
                          <option value="Courier New">Courier New</option>
                          <option value="Georgia">Georgia</option>
                          <option value="Times New Roman">Times New Roman</option>
                          <option value="Verdana">Verdana</option>
                      </select>
                  </div>
                  <div class="mb-3">
                      <label for="font-size-<%= evento.id %>" class="form-label">Tama침o de la letra</label>
                      <input type="number" class="form-control" id="font-size-<%= evento.id %>" name="font-size" min="10" max="30" value="14" oninput="applyCustomization('<%= evento.id %>')">
                  </div>
                  <div class="mb-3">
                      <label for="text-color-<%= evento.id %>" class="form-label">Color de la letra</label>
                      <input type="color" class="form-control" id="text-color-<%= evento.id %>" name="text-color" value="#000000" onchange="applyCustomization('<%= evento.id %>')">
                  </div>
                  <div class="mb-3">
                      <label for="background-color-<%= evento.id %>" class="form-label">Color de fondo</label>
                      <input type="color" class="form-control" id="background-color-<%= evento.id %>" name="background-color" value="#FFFFFF" onchange="applyCustomization('<%= evento.id %>')">
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>


                      <div class="modal fade" id="editModal-<%= evento.id %>" tabindex="-1" aria-labelledby="editModalLabel-<%= evento.id %>" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="editModalLabel-<%= evento.id %>">Editar Evento: <%=
                                  evento.titulo %>
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              <form class="update-event-form" action="/update-event/<%= evento.id %>" method="POST">
                                <div class="mb-3">
                                  <label for="titulo-<%= evento.id %>" class="form-label">T칤tulo</label>
                                  <input type="text" class="form-control" id="titulo-<%= evento.id %>" name="titulo" value="<%= evento.titulo %>" required>
                                </div>
                                <div class="mb-3">
                                  <label for="descripcion-<%= evento.id %>" class="form-label">Descripci칩n</label>
                                  <textarea class="form-control" id="descripcion-<%= evento.id %>" name="descripcion" rows="3" required><%= evento.descripcion %></textarea>
                                </div>
                                <div class="mb-3">
                                  <label for="fecha-<%= evento.id %>" class="form-label">Fecha</label>
                                  <input type="date" class="form-control" id="fecha-<%= evento.id %>" name="fecha" value="<%= evento.fecha %>" required>
                                </div>
                                <div class="mb-3">
                                  <label for="hora-<%= evento.id %>" class="form-label">Hora</label>
                                  <input type="time" class="form-control" id="hora-<%= evento.id %>" name="hora" value="<%= evento.hora %>" required>
                                </div>
                                <div class="mb-3">
                                  <label for="ubicacion-<%= evento.id %>" class="form-label">Ubicaci칩n</label>
                                  <input type="text" class="form-control" id="ubicacion-<%= evento.id %>" name="ubicacion" value="<%= evento.ubicacion %>" required>
                                </div>
                                <div class="mb-3">
                                  <label for="capacidad-<%= evento.id %>" class="form-label">Capacidad m치xima</label>
                                  <input type="number" class="form-control" id="capacidad-<%= evento.id %>" name="capacidad_maxima" value="<%= evento.capacidad_maxima %>" required>
                                </div>
                                <div class="mb-3">
                                  <label for="tipo-<%= evento.id %>" class="form-label">Tipo de evento</label>
                                  <input type="text" class="form-control" id="tipo-<%= evento.id %>" name="tipo" value="<%= evento.tipo %>" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Actualizar Evento</button>
                              </form>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>

                  </div>
                </div>
              </div>
              <% }); %>
            </div>
          </div>
          <!-- Modal -->


          <!-- Modal -->
          <div class="modal fade" id="changePhotoModal" tabindex="-1" aria-labelledby="changePhotoModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="changePhotoModalLabel">Cambiar Foto de Perfil</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form action="/upload-image" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                      <label for="imagen" class="form-label">Subir Nueva Imagen</label>
                      <input class="form-control" type="file" id="imagen" name="imagen" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Actualizar Imagen</button>
                  </form>
                </div>
              </div>
            </div>
          </div>



          <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="exampleModalLabel">Evento eliminado</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modal-body-content">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary">Vale</button>
                </div>
              </div>
            </div>
          </div>



          <%}%>


  </div>
  <footer>
    <div class="info">
      <ul><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone"
          viewBox="0 0 16 16">
          <path
            d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
        </svg> Tel칠fono: 91 358 13 65</ul>
      <ul><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-at"
          viewBox="0 0 16 16">
          <path
            d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2zm3.708 6.208L1 11.105V5.383zM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2z" />
          <path
            d="M14.247 14.269c1.01 0 1.587-.857 1.587-2.025v-.21C15.834 10.43 14.64 9 12.52 9h-.035C10.42 9 9 10.36 9 12.432v.214C9 14.82 10.438 16 12.358 16h.044c.594 0 1.018-.074 1.237-.175v-.73c-.245.11-.673.18-1.18.18h-.044c-1.334 0-2.571-.788-2.571-2.655v-.157c0-1.657 1.058-2.724 2.64-2.724h.04c1.535 0 2.484 1.05 2.484 2.326v.118c0 .975-.324 1.39-.639 1.39-.232 0-.41-.148-.41-.42v-2.19h-.906v.569h-.03c-.084-.298-.368-.63-.954-.63-.778 0-1.259.555-1.259 1.4v.528c0 .892.49 1.434 1.26 1.434.471 0 .896-.227 1.014-.643h.043c.118.42.617.648 1.12.648m-2.453-1.588v-.227c0-.546.227-.791.573-.791.297 0 .572.192.572.708v.367c0 .573-.253.744-.564.744-.354 0-.581-.215-.581-.8Z" />
        </svg> email: <a href="">gestionmaster@ucm.es</a></ul>
      <ul>S칤guenos en redes sociales</ul>
      <ul>Campamento UCM</ul>
      <ul>Pr치cticas</ul>
      <ul>Ofertas de empleo</ul>
    </div>
    <div class="images">
      <ul><img src="images/facebook.png"></ul>
      <ul><img src="images/x.avif"></ul>
      <ul><img src="images/linkedin.webp"></ul>

    </div>
    <div class="close">
      <ul><a href="/logout">Cerrar sesi칩n</a></ul>
    </div>
    <div class="copy">
      <p>춸 2024 Todos los derechos reservados.</p>
    </div>
  </footer>
  <!-- Modal -->
  <div class="modal fade" id="fontSizeModal" tabindex="-1" aria-labelledby="fontSizeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="fontSizeModalLabel">Cambiar Tama침o de Fuente</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <label for="fontSizeInput">Introduce el tama침o de fuente (en p칤xeles):</label>
          <input type="number" id="fontSizeInput" class="form-control" placeholder="Ej. 16">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="applyFontSize">Aplicar</button>
        </div>
      </div>
    </div>
  </div>


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    });

    document.getElementById('applyFontSize').addEventListener('click', function () {
      const newSize = document.getElementById('fontSizeInput').value;
      if (newSize) {
        document.body.style.fontSize = newSize + 'px';
        var myModalEl = document.getElementById('fontSizeModal');
        var modal = bootstrap.Modal.getInstance(myModalEl);
        modal.hide();
      }
    });



    function resetContrast() {
      document.body.style.backgroundColor = "";
      document.body.style.color = "";
      document.querySelectorAll('.navbar, footer').forEach(function (element) {
        element.style.backgroundColor = "";
      });
      document.querySelectorAll('.navbar a, .dropdown-menu, .dropdown-item').forEach(function (element) {
        element.style.color = "";
      });
      document.querySelectorAll('.table-container').forEach(function (element) {
        element.style.backgroundColor = "";
        element.style.color = "";
      });

    }
    function lightTheme() {
      document.body.style.backgroundColor = "#ffffff";
      document.body.style.color = "#000000";


      document.querySelectorAll('nav, footer').forEach(function (element) {
        element.style.backgroundColor = "rgb(144, 199, 247)";
      });


      document.querySelector('header').style.backgroundColor = "rgb(120, 170, 212)";
      document.querySelector('header h1').style.color = "#000000";

      document.querySelectorAll('.navbar a, .dropdown-menu, .dropdown-item').forEach(function (element) {
        element.style.color = "#000000";
      });


      document.querySelectorAll('.dropdown-menu').forEach(function (element) {
        element.style.backgroundColor = "#ffffff";
      });

      document.querySelector('footer').style.color = "#000000";
      document.querySelector('#usuario').style.color = "#000000";
      document.querySelectorAll('.table-container').forEach(function (element) {
        element.style.backgroundColor = "#ffffff";
        element.style.color = "#000000";
      });


    }
document.getElementById('searchForm').addEventListener('submit', function (event) {
        event.preventDefault();
        const query = document.getElementById('searchInput').value;
        if (query) {
            window.location.href = `${window.location.pathname}?q=${query}`;
        } else {
            window.location.href = window.location.pathname;
        }
    });

    function darkTheme() {
      document.body.style.backgroundColor = "#343a40";
      document.body.style.color = "#ffffff";
      document.querySelectorAll('.navbar, footer').forEach(function (element) {
        element.style.backgroundColor = "#212529";
      });
      document.querySelectorAll('.navbar a, .dropdown-menu, .dropdown-item').forEach(function (element) {
        element.style.color = "#ffffff";
      });
      document.querySelectorAll('.table-container').forEach(function (element) {
        element.style.backgroundColor = "#343a40";
        element.style.color = "#ffffff";
      });

    }

    
    function applyCustomization(eventId) {
        const fontFamily = document.getElementById(`font-family-${eventId}`).value;
        const fontSize = document.getElementById(`font-size-${eventId}`).value + 'px';
        const textColor = document.getElementById(`text-color-${eventId}`).value;
        const backgroundColor = document.getElementById(`background-color-${eventId}`).value;

        const card = document.querySelector(`[data-event-id="${eventId}"]`);

        card.style.fontFamily = fontFamily;
        card.style.fontSize = fontSize;
        card.style.color = textColor;
        card.style.backgroundColor = backgroundColor;

      
    }



  </script>

</body>

</html>